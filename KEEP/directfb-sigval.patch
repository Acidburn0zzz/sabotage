--- DirectFB-1.6.2.org/lib/direct/os/linux/glibc/system.c
+++ DirectFB-1.6.2/lib/direct/os/linux/glibc/system.c
@@ -33,6 +33,7 @@
 #include <errno.h>
 #include <signal.h>
 #include <unistd.h>
+#include <sys/syscall.h>
 
 #include <linux/unistd.h>
 
@@ -107,13 +108,14 @@
 void
 direct_trap( const char *domain, int sig )
 {
+
+#ifndef DIRECT_BUILD_NO_SIGQUEUE
      sigval_t val;
 
      D_LOG( Direct_Trap, VERBOSE, "Raising signal %d from %s...\n", sig, domain );
 
      val.sival_int = direct_gettid();
 
-#ifndef DIRECT_BUILD_NO_SIGQUEUE
      sigqueue( direct_gettid(), sig, val );
 #endif
 //     direct_tgkill( direct_getpid(), direct_gettid(), sig );
